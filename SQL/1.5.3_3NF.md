# Third Normal Form(3NF)

## 🧩 What Is Third Normal Form (3NF)?

A table is in **Third Normal Form (3NF)** if:

> 1️⃣ It’s already in **Second Normal Form (2NF)**
> 2️⃣ **All non-key attributes depend only on the primary key** — and not on any other non-key attribute.

In other words:

> **No transitive dependencies** are allowed.

---

## 🧠 Understanding Transitive Dependency

A **transitive dependency** means a **non-key column** depends on another **non-key column**, rather than directly on the **primary key**.

This introduces redundancy and inconsistency because one piece of data indirectly determines another.

---

### 🔹 Example: Violating 3NF

| StudentID | StudentName | CourseID | CourseName | Instructor | InstructorOffice |
| --------- | ----------- | -------- | ---------- | ---------- | ---------------- |
| 1         | Alice       | MATH101  | Math       | Mr. Smith  | Room 201         |
| 2         | Bob         | MATH101  | Math       | Mr. Smith  | Room 201         |
| 3         | Carol       | ENG202   | English    | Ms. Jones  | Room 105         |

---

### Dependencies:

* `StudentID` → `StudentName`, `CourseID`
* `CourseID` → `CourseName`, `Instructor`
* `Instructor` → `InstructorOffice`

The problem:
👉 `InstructorOffice` depends on `Instructor`, which depends on `CourseID` — so it’s *indirectly dependent* on the primary key (`StudentID + CourseID`).

This violates 3NF because **non-key columns (InstructorOffice)** depend on **another non-key column (Instructor)** instead of the key.

---

## 🧱 How to Fix It (Convert to 3NF)

We remove transitive dependencies by **splitting the table** into smaller, more focused ones.

---

### Step 1️⃣: Identify independent entities

We can see three:

* **Students**
* **Courses**
* **Instructors**

---

### Step 2️⃣: Create new tables

**Students**

| StudentID | StudentName |
| --------- | ----------- |
| 1         | Alice       |
| 2         | Bob         |
| 3         | Carol       |

**Courses**

| CourseID | CourseName | Instructor |
| -------- | ---------- | ---------- |
| MATH101  | Math       | Mr. Smith  |
| ENG202   | English    | Ms. Jones  |

**Instructors**

| Instructor | InstructorOffice |
| ---------- | ---------------- |
| Mr. Smith  | Room 201         |
| Ms. Jones  | Room 105         |

**Enrollments**

| StudentID | CourseID |
| --------- | -------- |
| 1         | MATH101  |
| 2         | MATH101  |
| 3         | ENG202   |

Now:

* `InstructorOffice` depends directly on `Instructor`, not transitively through `CourseID`.
* Every non-key field depends only on its table’s key.

✅ **Now the schema is in 3NF.**

---

## 💾 SQL Example

```sql
CREATE TABLE Students (
  StudentID INT PRIMARY KEY,
  StudentName VARCHAR(100)
);

CREATE TABLE Instructors (
  InstructorID INT PRIMARY KEY,
  InstructorName VARCHAR(100),
  InstructorOffice VARCHAR(50)
);

CREATE TABLE Courses (
  CourseID VARCHAR(10) PRIMARY KEY,
  CourseName VARCHAR(100),
  InstructorID INT,
  FOREIGN KEY (InstructorID) REFERENCES Instructors(InstructorID)
);

CREATE TABLE Enrollments (
  StudentID INT,
  CourseID VARCHAR(10),
  PRIMARY KEY (StudentID, CourseID),
  FOREIGN KEY (StudentID) REFERENCES Students(StudentID),
  FOREIGN KEY (CourseID) REFERENCES Courses(CourseID)
);
```

Now all relationships are explicit and **no transitive dependencies remain**.

---

## ⚙️ 3NF Requirements Summary

| Requirement                                        | Description                                                  |
| -------------------------------------------------- | ------------------------------------------------------------ |
| 1️⃣ In 2NF                                         | Table must already satisfy 1NF and 2NF.                      |
| 2️⃣ No transitive dependency                       | Non-key attributes can’t depend on other non-key attributes. |
| 3️⃣ Each attribute depends only on the primary key | Every field describes the entity represented by the table.   |

---

## 🧩 Key Difference Between 2NF and 3NF

| Aspect         | 2NF                                                | 3NF                                                   |
| -------------- | -------------------------------------------------- | ----------------------------------------------------- |
| Focus          | Removes **partial dependencies**                   | Removes **transitive dependencies**                   |
| Problem solved | Non-key attributes depend on part of composite key | Non-key attributes depend on other non-key attributes |
| Example issue  | `CourseName` depends on `CourseID` only            | `InstructorOffice` depends on `Instructor`            |
| Result         | Each field depends on full key                     | Each field depends only on key                        |

---

## 🧠 Benefits of 3NF

| Benefit                              | Description                                                             |
| ------------------------------------ | ----------------------------------------------------------------------- |
| 🔍 **Removes transitive redundancy** | Ensures non-key attributes depend only on the key.                      |
| 💾 **Saves space**                   | Eliminates repeated instructor info or offices.                         |
| 🧩 **Improves data integrity**       | Changes happen in one place only.                                       |
| ⚙️ **Simplifies updates**            | If an instructor moves offices, update one table only.                  |
| 🔗 **Logical structure**             | Each table represents one concept: Students, Courses, Instructors, etc. |

---

## ⚠️ Common Violations

| Violation                  | Example                                                    | Problem                 |
| -------------------------- | ---------------------------------------------------------- | ----------------------- |
| Non-key depends on non-key | `InstructorOffice` depends on `Instructor`                 | Transitive dependency   |
| Derived data stored        | `TotalCost` stored instead of computed                     | Can become inconsistent |
| Multi-topic tables         | Table mixes two entities (like students *and* instructors) | Confusing dependencies  |

---

## 🧮 Real-World Analogy

Imagine a **library catalog**:

* A book has a **title** and **author**.
* The author has an **email**.

If you store `AuthorEmail` in the `Books` table, you must update it for every book when the author changes emails.

3NF says:
🧠 *Separate Authors into their own table — each fact belongs in exactly one place.*

---

## ✅ 3NF Checklist

| Question                                                  | Yes → Proceed / No → Fix |
| --------------------------------------------------------- | ------------------------ |
| Is the table in 2NF?                                      | ✅                        |
| Does every non-key field depend only on the primary key?  | ✅                        |
| Are there any fields that depend on other non-key fields? | ❌                        |
| Are all transitive dependencies removed?                  | ✅                        |
| If yes → The table is in **3NF**                          | 🎉                       |

---

## 🧠 Summary

| Concept            | Description                                                                      |
| ------------------ | -------------------------------------------------------------------------------- |
| **Definition**     | Table is in 3NF if it’s in 2NF and has no transitive dependencies                |
| **Introduced by**  | Dr. Edgar F. Codd (1971, extension of his relational model)                      |
| **Goal**           | Eliminate indirect (non-key-to-non-key) dependencies                             |
| **Problem Solved** | Reduces redundancy caused by derived or dependent attributes                     |
| **Result**         | Each table represents one entity, and each non-key field depends only on the key |

---

## 🧩 In Short

> **1NF** – Eliminate repeating groups → atomic values
> **2NF** – Eliminate partial dependencies → full key dependence
> **3NF** – Eliminate transitive dependencies → key-only dependence

---
