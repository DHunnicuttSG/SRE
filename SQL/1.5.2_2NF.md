# Second Normal Form (2NF)
---

## ğŸ§© What Is Second Normal Form (2NF)?

**Second Normal Form (2NF)** builds on **First Normal Form (1NF)** and focuses on eliminating **partial dependencies** â€” specifically when a table has a **composite primary key** (a key made of two or more columns).

In simpler terms:

> A table is in **2NF** if:
>
> 1. Itâ€™s already in **1NF**, and
> 2. **Every non-key column depends on the whole primary key**, not just part of it.

---

## ğŸ§  Quick Refresher

### ğŸ‘‰ 1NF Recap

* Each field contains **atomic (single) values**.
* No repeating groups or arrays.
* Each row is **unique**.

Now 2NF goes further to remove **redundancy** caused by **partial key dependencies**.

---

## ğŸ§± Understanding **Partial Dependency**

A **partial dependency** occurs when a **non-key column** depends on **part of a composite primary key**, not the entire key.

âœ… In 2NF, **non-key attributes must depend on the entire key**.

---

### ğŸ”¹ Example: Student-Course Table (Violating 2NF)

| **StudentID** | **CourseID** | **StudentName** | **CourseName** | **Instructor** |
| ------------- | ------------ | --------------- | -------------- | -------------- |
| 1             | MATH101      | Alice           | Math           | Mr. Smith      |
| 2             | MATH101      | Bob             | Math           | Mr. Smith      |
| 1             | ENG202       | Alice           | English        | Ms. Jones      |

#### Composite Primary Key:

`(StudentID, CourseID)`

#### Dependencies:

* `StudentName` â†’ depends only on `StudentID`
* `CourseName`, `Instructor` â†’ depend only on `CourseID`

This means **non-key columns** depend on **parts** of the composite key, not the **whole key** â†’ violates 2NF.

---

## âœ… Conversion to 2NF

We remove partial dependencies by **splitting the table** into smaller, focused tables.

---

### Step 1: Identify dependencies

| Attribute   | Depends On | Problem            |
| ----------- | ---------- | ------------------ |
| StudentName | StudentID  | Partial dependency |
| CourseName  | CourseID   | Partial dependency |
| Instructor  | CourseID   | Partial dependency |

---

### Step 2: Create new tables

**1ï¸âƒ£ Students Table**

| StudentID | StudentName |
| --------- | ----------- |
| 1         | Alice       |
| 2         | Bob         |

**2ï¸âƒ£ Courses Table**

| CourseID | CourseName | Instructor |
| -------- | ---------- | ---------- |
| MATH101  | Math       | Mr. Smith  |
| ENG202   | English    | Ms. Jones  |

**3ï¸âƒ£ Enrollments Table (linking table)**

| StudentID | CourseID |
| --------- | -------- |
| 1         | MATH101  |
| 2         | MATH101  |
| 1         | ENG202   |

---

### Step 3: Define Relationships

* `Students(StudentID)` â†” `Enrollments(StudentID)`
* `Courses(CourseID)` â†” `Enrollments(CourseID)`

Each table now holds data **dependent on its own primary key only**.

âœ… **Now the design is in 2NF**.

---

## ğŸ§® SQL Implementation

```sql
CREATE TABLE Students (
  StudentID INT PRIMARY KEY,
  StudentName VARCHAR(100)
);

CREATE TABLE Courses (
  CourseID VARCHAR(10) PRIMARY KEY,
  CourseName VARCHAR(100),
  Instructor VARCHAR(100)
);

CREATE TABLE Enrollments (
  StudentID INT,
  CourseID VARCHAR(10),
  PRIMARY KEY (StudentID, CourseID),
  FOREIGN KEY (StudentID) REFERENCES Students(StudentID),
  FOREIGN KEY (CourseID) REFERENCES Courses(CourseID)
);
```

Now:

* `Students` table stores only student data.
* `Courses` table stores course data.
* `Enrollments` table connects them â€” no redundant or partially dependent data.

---

## ğŸ§© Rules for 2NF

| Rule                        | Description                                                    | Example                                             |
| --------------------------- | -------------------------------------------------------------- | --------------------------------------------------- |
| 1ï¸âƒ£ In 1NF                  | The table must first satisfy 1NF (atomic values, unique rows). | No repeating groups.                                |
| 2ï¸âƒ£ No partial dependency   | Every non-key column must depend on the entire primary key.    | `StudentName` shouldnâ€™t depend only on `StudentID`. |
| 3ï¸âƒ£ Focus on composite keys | 2NF only matters when thereâ€™s a composite key.                 | `(StudentID, CourseID)`                             |

---

## ğŸ’¡ Why 2NF Matters

| Benefit                        | Description                                                                |
| ------------------------------ | -------------------------------------------------------------------------- |
| ğŸ§  **Removes redundancy**      | No repeating student or course info across multiple rows.                  |
| ğŸ”— **Improves data integrity** | Each table maintains consistent, single-purpose data.                      |
| âš™ï¸ **Simplifies updates**      | Update instructor name once in `Courses`, not in every enrollment.         |
| ğŸš€ **Foundation for 3NF**      | Prevents partial dependency; next, weâ€™ll remove *transitive* dependencies. |

---

## âš ï¸ When 2NF Is Violated

| Issue                            | Description                                         | Example                                                    |
| -------------------------------- | --------------------------------------------------- | ---------------------------------------------------------- |
| **Partial dependency**           | Non-key column depends on part of a composite key.  | `StudentName` depends only on `StudentID`.                 |
| **Data redundancy**              | Same info repeated across multiple rows.            | Instructor name repeated for every student in same course. |
| **Update anomalies**             | Changing one record may cause inconsistencies.      | Changing â€œMr. Smithâ€ in one row doesnâ€™t update others.     |
| **Insertion/deletion anomalies** | Canâ€™t add a course without a student or vice versa. | â€œENG202â€ canâ€™t exist until a student enrolls.              |

---

## ğŸ“Š Visual Summary

| Concept    | Description                                            | Example                                                               |
| ---------- | ------------------------------------------------------ | --------------------------------------------------------------------- |
| **1NF**    | Eliminate repeating groups; make data atomic           | â€œMath, Englishâ€ â†’ separate rows                                       |
| **2NF**    | Eliminate partial dependencies                         | `Instructor` should depend on `CourseID`, not `(StudentID, CourseID)` |
| **Result** | Each table has data fully dependent on its primary key | Student, Course, and Enrollment separated                             |

---

## ğŸ§  Real-World Analogy

Imagine a school whiteboard listing all students and their courses:

| Student | Course | Instructor |
| ------- | ------ | ---------- |
| Alice   | Math   | Mr. Smith  |
| Bob     | Math   | Mr. Smith  |

If â€œMr. Smithâ€ changes his name or leaves, you have to erase him multiple times.
2NF says:
ğŸ§¹ *Keep instructors and courses in their own section, and just reference them by ID.*

---

## âœ… Quick Checklist for 2NF

| Question                                          | Yes â†’ Proceed / No â†’ Fix       |
| ------------------------------------------------- | ------------------------------ |
| Is the table in 1NF (atomic values)?              | âœ…                              |
| Does the table have a composite key?              | âœ… (if yes, check dependencies) |
| Do all non-key attributes depend on the full key? | âœ…                              |
| No partial dependency exists?                     | âœ…                              |
| Then table is in **2NF**                          | ğŸ‰                             |

---

## ğŸ§  Summary

| Property           | Description                                                    |
| ------------------ | -------------------------------------------------------------- |
| **Definition**     | Table is in 2NF if itâ€™s in 1NF and has no partial dependencies |
| **Focus**          | Composite keys and attribute dependencies                      |
| **Problem Solved** | Eliminates redundancy due to partial key dependencies          |
| **Result**         | Tables that represent single, logical entities                 |
| **Introduced by**  | Dr. Edgar F. Codd (1970), as part of the relational model      |

---
