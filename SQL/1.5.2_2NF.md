# Second Normal Form (2NF)
---

## 🧩 What Is Second Normal Form (2NF)?

**Second Normal Form (2NF)** builds on **First Normal Form (1NF)** and focuses on eliminating **partial dependencies** — specifically when a table has a **composite primary key** (a key made of two or more columns).

In simpler terms:

> A table is in **2NF** if:
>
> 1. It’s already in **1NF**, and
> 2. **Every non-key column depends on the whole primary key**, not just part of it.

---

## 🧠 Quick Refresher

### 👉 1NF Recap

* Each field contains **atomic (single) values**.
* No repeating groups or arrays.
* Each row is **unique**.

Now 2NF goes further to remove **redundancy** caused by **partial key dependencies**.

---

## 🧱 Understanding **Partial Dependency**

A **partial dependency** occurs when a **non-key column** depends on **part of a composite primary key**, not the entire key.

✅ In 2NF, **non-key attributes must depend on the entire key**.

---

### 🔹 Example: Student-Course Table (Violating 2NF)

| **StudentID** | **CourseID** | **StudentName** | **CourseName** | **Instructor** |
| ------------- | ------------ | --------------- | -------------- | -------------- |
| 1             | MATH101      | Alice           | Math           | Mr. Smith      |
| 2             | MATH101      | Bob             | Math           | Mr. Smith      |
| 3             | ENG202       | Alice           | English        | Ms. Jones      |

#### Composite Primary Key:

`(StudentID, CourseID)`

#### Dependencies:

* `StudentName` → depends only on `StudentID`
* `CourseName`, `Instructor` → depend only on `CourseID`

This means **non-key columns** depend on **parts** of the composite key, not the **whole key** → violates 2NF.

---

## ✅ Conversion to 2NF

We remove partial dependencies by **splitting the table** into smaller, focused tables.

---

### Step 1: Identify dependencies

| Attribute   | Depends On | Problem            |
| ----------- | ---------- | ------------------ |
| StudentName | StudentID  | Partial dependency |
| CourseName  | CourseID   | Partial dependency |
| Instructor  | CourseID   | Partial dependency |

---

### Step 2: Create new tables

**1️⃣ Students Table**

| StudentID | StudentName |
| --------- | ----------- |
| 1         | Alice       |
| 2         | Bob         |

**2️⃣ Courses Table**

| CourseID | CourseName | Instructor |
| -------- | ---------- | ---------- |
| MATH101  | Math       | Mr. Smith  |
| ENG202   | English    | Ms. Jones  |

**3️⃣ Enrollments Table (linking table)**

| StudentID | CourseID |
| --------- | -------- |
| 1         | MATH101  |
| 2         | MATH101  |
| 3         | ENG202   |

---

### Step 3: Define Relationships

* `Students(StudentID)` ↔ `Enrollments(StudentID)`
* `Courses(CourseID)` ↔ `Enrollments(CourseID)`

Each table now holds data **dependent on its own primary key only**.

✅ **Now the design is in 2NF**.

---

## 🧮 SQL Implementation

```sql
CREATE TABLE Students (
  StudentID INT PRIMARY KEY,
  StudentName VARCHAR(100)
);

CREATE TABLE Courses (
  CourseID VARCHAR(10) PRIMARY KEY,
  CourseName VARCHAR(100),
  Instructor VARCHAR(100)
);

CREATE TABLE Enrollments (
  StudentID INT,
  CourseID VARCHAR(10),
  PRIMARY KEY (StudentID, CourseID),
  FOREIGN KEY (StudentID) REFERENCES Students(StudentID),
  FOREIGN KEY (CourseID) REFERENCES Courses(CourseID)
);
```

Now:

* `Students` table stores only student data.
* `Courses` table stores course data.
* `Enrollments` table connects them — no redundant or partially dependent data.

---

## 🧩 Rules for 2NF

| Rule                        | Description                                                    | Example                                             |
| --------------------------- | -------------------------------------------------------------- | --------------------------------------------------- |
| 1️⃣ In 1NF                  | The table must first satisfy 1NF (atomic values, unique rows). | No repeating groups.                                |
| 2️⃣ No partial dependency   | Every non-key column must depend on the entire primary key.    | `StudentName` shouldn’t depend only on `StudentID`. |
| 3️⃣ Focus on composite keys | 2NF only matters when there’s a composite key.                 | `(StudentID, CourseID)`                             |

---

## 💡 Why 2NF Matters

| Benefit                        | Description                                                                |
| ------------------------------ | -------------------------------------------------------------------------- |
| 🧠 **Removes redundancy**      | No repeating student or course info across multiple rows.                  |
| 🔗 **Improves data integrity** | Each table maintains consistent, single-purpose data.                      |
| ⚙️ **Simplifies updates**      | Update instructor name once in `Courses`, not in every enrollment.         |
| 🚀 **Foundation for 3NF**      | Prevents partial dependency; next, we’ll remove *transitive* dependencies. |

---

## ⚠️ When 2NF Is Violated

| Issue                            | Description                                         | Example                                                    |
| -------------------------------- | --------------------------------------------------- | ---------------------------------------------------------- |
| **Partial dependency**           | Non-key column depends on part of a composite key.  | `StudentName` depends only on `StudentID`.                 |
| **Data redundancy**              | Same info repeated across multiple rows.            | Instructor name repeated for every student in same course. |
| **Update anomalies**             | Changing one record may cause inconsistencies.      | Changing “Mr. Smith” in one row doesn’t update others.     |
| **Insertion/deletion anomalies** | Can’t add a course without a student or vice versa. | “ENG202” can’t exist until a student enrolls.              |

---

## 📊 Visual Summary

| Concept    | Description                                            | Example                                                               |
| ---------- | ------------------------------------------------------ | --------------------------------------------------------------------- |
| **1NF**    | Eliminate repeating groups; make data atomic           | “Math, English” → separate rows                                       |
| **2NF**    | Eliminate partial dependencies                         | `Instructor` should depend on `CourseID`, not `(StudentID, CourseID)` |
| **Result** | Each table has data fully dependent on its primary key | Student, Course, and Enrollment separated                             |

---

## 🧠 Real-World Analogy

Imagine a school whiteboard listing all students and their courses:

| Student | Course | Instructor |
| ------- | ------ | ---------- |
| Alice   | Math   | Mr. Smith  |
| Bob     | Math   | Mr. Smith  |

If “Mr. Smith” changes his name or leaves, you have to erase him multiple times.
2NF says:
🧹 *Keep instructors and courses in their own section, and just reference them by ID.*

---

## ✅ Quick Checklist for 2NF

| Question                                          | Yes → Proceed / No → Fix       |
| ------------------------------------------------- | ------------------------------ |
| Is the table in 1NF (atomic values)?              | ✅                              |
| Does the table have a composite key?              | ✅ (if yes, check dependencies) |
| Do all non-key attributes depend on the full key? | ✅                              |
| No partial dependency exists?                     | ✅                              |
| Then table is in **2NF**                          | 🎉                             |

---

## 🧠 Summary

| Property           | Description                                                    |
| ------------------ | -------------------------------------------------------------- |
| **Definition**     | Table is in 2NF if it’s in 1NF and has no partial dependencies |
| **Focus**          | Composite keys and attribute dependencies                      |
| **Problem Solved** | Eliminates redundancy due to partial key dependencies          |
| **Result**         | Tables that represent single, logical entities                 |
| **Introduced by**  | Dr. Edgar F. Codd (1970), as part of the relational model      |

---
