# **Using the `sed` Command in Linux**

---

## **1. Learning Objectives**

By the end of this lesson, students will be able to:

* Understand what `sed` is and how it processes text.
* Use `sed` to substitute, delete, and transform text.
* Apply `sed` with regular expressions for advanced editing.
* Perform inline editing of files.
* Combine `sed` with pipes for automation and scripting.

---

## **2. Introduction to `sed`**

* **`sed`** stands for **Stream Editor**.
* It reads text line by line, applies transformations, and writes the result.
* Syntax:

  ```bash
  sed [options] 'command' file
  ```
* Unlike editors (like `vim`), `sed` edits text **non-interactively**.

---

## **3. Basic Usage**

### **Print a File (default)**

```bash
sed '' file.txt
```

* Prints the file without changes (similar to `cat`).

### **Substitute Text**

```bash
sed 's/error/warning/' logfile.txt
```

* Replaces the first occurrence of *error* with *warning* in each line.

### **Global Replacement**

```bash
sed 's/error/warning/g' logfile.txt
```

* Replaces *all* occurrences of *error* per line.

---

## **4. Useful Options**

| Option       | Description                                | Example                                    |
| ------------ | ------------------------------------------ | ------------------------------------------ |
| `-n`         | Suppress automatic printing (use with `p`) | `sed -n 's/error/warning/p' file`          |
| `-i`         | Edit file in place                         | `sed -i 's/foo/bar/g' file.txt`            |
| `-e`         | Run multiple commands                      | `sed -e 's/foo/bar/' -e 's/baz/qux/' file` |
| `-r` or `-E` | Extended regex (depending on distro)       | `sed -E 's/[0-9]+/NUM/' file`              |

---

## **5. Addressing Lines**

You can apply commands to specific lines or ranges.

### **By Line Number**

```bash
sed '2s/foo/bar/' file.txt
```

* Replaces *foo* with *bar* only on line 2.

```bash
sed '1,3d' file.txt
```

* Deletes lines 1 through 3.

### **By Pattern**

```bash
sed '/error/d' logfile.txt
```

* Deletes lines containing *error*.

---

## **6. Common `sed` Commands**

| Command                  | Action                           |
| ------------------------ | -------------------------------- |
| `s/pattern/replacement/` | Substitute text                  |
| `d`                      | Delete line(s)                   |
| `p`                      | Print line(s)                    |
| `a\ text`                | Append text after a line         |
| `i\ text`                | Insert text before a line        |
| `c\ text`                | Replace (change) entire line     |
| `y/abc/xyz/`             | Transform characters (like `tr`) |

---

## **7. Practical Examples**

1. **Replace tabs with spaces**

```bash
sed 's/\t/    /g' file.txt
```

2. **Delete blank lines**

```bash
sed '/^$/d' file.txt
```

3. **Add a prefix to each line**

```bash
sed 's/^/[INFO] /' logfile.txt
```

4. **Convert lowercase to uppercase**

```bash
sed 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/' file.txt
```

5. **Insert a header line**

```bash
sed '1i\# Report Generated' report.txt
```

---

## **8. Using `sed` with Pipes**

`sed` is often used in command pipelines for automation.

### **Examples:**

```bash
ps aux | sed -n '1p'
```

* Prints only the first line of `ps aux` output.

```bash
dmesg | sed -n '/usb/p'
```

* Prints only kernel messages about USB devices.

---

## **9. Practice Exercises**

1. Replace all instances of *root* with *admin* in `/etc/passwd` output (without editing the file).
2. Delete all lines in a file that contain the word *debug*.
3. Add the line `"End of File"` after the last line of `file.txt`.
4. Write a `sed` command to replace the second field of a CSV file with the word `"REDACTED"`.
5. Use `sed` to print only lines 10â€“20 of a file.

---

## **10. Summary**

* `sed` is a **non-interactive text editor** for transforming streams of text.
* Core uses: **substitution, deletion, insertion, and transformation.**
* Works with **regex** and can target specific lines/patterns.
* Powerful for **scripting, log processing, and automation**.

---
